/* RDS Guard — Dark theme monitoring dashboard */

:root {
    --bg-primary: #0f1117;
    --bg-secondary: #1a1d27;
    --bg-card: #21242f;
    --bg-hover: #282c3a;
    --text-primary: #e4e6ed;
    --text-secondary: #8b8fa3;
    --text-muted: #5a5e70;
    --border: #2a2e3d;
    --accent-red: #ef4444;
    --accent-orange: #f59e0b;
    --accent-blue: #3b82f6;
    --accent-green: #22c55e;
    --accent-purple: #a855f7;
    --accent-red-dim: rgba(239, 68, 68, 0.15);
    --accent-orange-dim: rgba(245, 158, 11, 0.15);
    --accent-blue-dim: rgba(59, 130, 246, 0.15);
    --accent-green-dim: rgba(34, 197, 94, 0.15);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Header */
header {
    display: flex;
    align-items: center;
    padding: 0 1.25rem;
    height: 3.5rem;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
    gap: 1rem;
}

.header-left h1 {
    font-size: 1.1rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    white-space: nowrap;
}

nav {
    display: flex;
    gap: 0.25rem;
    margin-left: 1.5rem;
}

.nav-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 0.875rem;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
}

.nav-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.nav-btn.active {
    background: var(--bg-card);
    color: var(--text-primary);
}

.header-right {
    margin-left: auto;
    display: flex;
    align-items: center;
}

/* Connection status indicator */
.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

.status-dot.connected {
    background: var(--accent-green);
    box-shadow: 0 0 6px var(--accent-green);
}

.status-dot.disconnected {
    background: var(--text-muted);
}

/* Main content */
main {
    flex: 1;
    overflow-y: auto;
    padding: 1.25rem;
}

.view {
    display: none;
}

.view.active {
    display: block;
}

/* Filter chips */
.filter-bar {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.filter-chip {
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 0.375rem 0.875rem;
    border-radius: 100px;
    font-size: 0.8125rem;
    cursor: pointer;
    transition: all 0.15s;
}

.filter-chip:hover {
    border-color: var(--text-muted);
    color: var(--text-primary);
}

.filter-chip.active {
    background: var(--accent-blue-dim);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}

/* Event cards */
.event-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem 1.25rem;
    margin-bottom: 0.75rem;
    transition: border-color 0.15s;
}

.event-card:hover {
    border-color: var(--text-muted);
}

.event-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.event-type {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.event-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    flex-shrink: 0;
}

/* Event type colors */
.event-card.type-traffic .event-indicator { background: var(--accent-red); }
.event-card.type-traffic .event-type { color: var(--accent-red); }
.event-card.type-traffic.active { border-left: 3px solid var(--accent-red); }

.event-card.type-emergency .event-indicator { background: var(--accent-orange); }
.event-card.type-emergency .event-type { color: var(--accent-orange); }
.event-card.type-emergency { border-left: 3px solid var(--accent-orange); }

.event-card.type-eon_traffic .event-indicator { background: var(--accent-blue); }
.event-card.type-eon_traffic .event-type { color: var(--accent-blue); }

.event-card.type-tmc .event-indicator { background: var(--accent-purple); }
.event-card.type-tmc .event-type { color: var(--accent-purple); }

.event-time {
    font-size: 0.8125rem;
    color: var(--text-muted);
    font-family: "SF Mono", "Fira Code", monospace;
}

.event-station {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin-bottom: 0.625rem;
}

.event-radiotext {
    margin: 0.5rem 0;
}

.event-radiotext p {
    font-size: 0.9375rem;
    color: var(--text-primary);
    padding: 0.375rem 0;
    border-left: 2px solid var(--border);
    padding-left: 0.75rem;
    margin-bottom: 0.25rem;
}

.event-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin-top: 0.625rem;
}

.event-duration {
    color: var(--text-muted);
}

.event-badge {
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: 100px;
    font-weight: 500;
}

.badge-active {
    background: var(--accent-red-dim);
    color: var(--accent-red);
}

.badge-ended {
    background: var(--bg-hover);
    color: var(--text-muted);
}

/* Transcription block */
.event-transcription {
    margin: 0.625rem 0;
}

.event-section-label {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.event-transcription p {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    padding: 0.375rem 0.75rem;
    border-left: 2px solid var(--accent-green);
    background: var(--accent-green-dim);
    border-radius: 0 4px 4px 0;
    line-height: 1.5;
}

/* Transcription status indicators */
.event-transcription-status {
    font-size: 0.8125rem;
    color: var(--text-muted);
    margin: 0.5rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.event-transcription-status.error {
    color: var(--accent-orange);
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
}

.status-indicator.recording {
    background: var(--accent-red);
    animation: pulse 1.5s ease-in-out infinite;
}

.status-indicator.transcribing {
    background: var(--accent-blue);
    animation: blink 1s ease-in-out infinite;
}

/* Audio player */
.event-audio {
    margin: 0.5rem 0;
}

.event-audio audio {
    width: 100%;
    height: 36px;
    border-radius: 6px;
    outline: none;
}

/* Dark theme audio player (Webkit) */
.event-audio audio::-webkit-media-controls-panel {
    background: var(--bg-hover);
}

/* Pulsing indicator for active events */
.event-card.active .event-indicator {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 var(--accent-red); }
    50% { opacity: 0.7; box-shadow: 0 0 8px 2px var(--accent-red); }
}

/* Active events section */
#active-events:not(:empty) {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

/* Empty state */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--text-muted);
    font-size: 0.9375rem;
}

/* Load more */
.load-more-btn {
    display: block;
    width: 100%;
    padding: 0.75rem;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    border-radius: 8px;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.15s;
}

.load-more-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

/* Console view */
.console-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
}

.console-btn {
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 0.375rem 0.875rem;
    border-radius: 6px;
    font-size: 0.8125rem;
    cursor: pointer;
    transition: all 0.15s;
    white-space: nowrap;
}

.console-btn:hover {
    border-color: var(--text-muted);
    color: var(--text-primary);
}

.console-btn.paused {
    background: var(--accent-orange-dim);
    border-color: var(--accent-orange);
    color: var(--accent-orange);
}

.console-input {
    flex: 1;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-primary);
    padding: 0.375rem 0.75rem;
    border-radius: 6px;
    font-size: 0.8125rem;
    font-family: "SF Mono", "Fira Code", monospace;
    outline: none;
    transition: border-color 0.15s;
}

.console-input:focus {
    border-color: var(--accent-blue);
}

.console-input::placeholder {
    color: var(--text-muted);
}

.console-count {
    font-size: 0.75rem;
    color: var(--text-muted);
    white-space: nowrap;
}

.console-log {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.5rem;
    font-family: "SF Mono", "Fira Code", monospace;
    font-size: 0.8125rem;
    line-height: 1.5;
    overflow-y: auto;
    height: calc(100vh - 16rem);
}

.console-line {
    display: flex;
    gap: 1rem;
    padding: 0.125rem 0.5rem;
    border-radius: 3px;
}

.console-line:hover {
    background: var(--bg-hover);
}

.console-ts {
    color: var(--text-muted);
    flex-shrink: 0;
}

.console-topic {
    color: var(--accent-blue);
    min-width: 10rem;
    flex-shrink: 0;
}

.console-payload {
    color: var(--text-secondary);
    word-break: break-all;
    flex: 1;
}

.console-line.is-alert .console-topic {
    color: var(--accent-red);
    font-weight: 600;
}

/* Status bar (footer) — two-row info panel */
footer {
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
    font-size: 0.8125rem;
    color: var(--text-secondary);
    flex-shrink: 0;
}

.status-row {
    display: flex;
    align-items: center;
    padding: 0 1.25rem;
    gap: 0.5rem;
}

.status-row-main {
    height: 2.25rem;
    border-bottom: 1px solid var(--border);
}

.status-row-info {
    height: 2rem;
    gap: 1.5rem;
}

.status-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.status-group-right {
    margin-left: auto;
}

.status-sep {
    color: var(--text-muted);
}

.status-station-name {
    font-weight: 600;
    color: var(--text-primary);
}

/* Programme type tag */
.status-tag {
    font-size: 0.6875rem;
    padding: 0.0625rem 0.5rem;
    border-radius: 100px;
    background: var(--bg-hover);
    color: var(--text-secondary);
    white-space: nowrap;
}

/* TP / TA flag badges */
.status-flag {
    font-size: 0.6875rem;
    font-weight: 700;
    padding: 0.0625rem 0.375rem;
    border-radius: 3px;
    background: var(--bg-hover);
    color: var(--text-muted);
    letter-spacing: 0.03em;
}

.status-flag.tp-on {
    background: var(--accent-blue-dim);
    color: var(--accent-blue);
}

.status-flag.ta-on {
    background: var(--accent-red-dim);
    color: var(--accent-red);
    animation: pulse-ta 1.2s ease-in-out infinite;
}

@keyframes pulse-ta {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

/* Pipeline status indicator */
.status-pipeline {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--text-muted);
}

.status-pipeline.running {
    background: var(--accent-green);
    box-shadow: 0 0 4px var(--accent-green);
}

.status-pipeline.error {
    background: var(--accent-red);
}

.status-pipeline.starting {
    background: var(--accent-orange);
    animation: blink 1s ease-in-out infinite;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* RadioText display in status bar */
.status-rt-area {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    min-width: 0;
}

.status-rt-label {
    font-size: 0.625rem;
    font-weight: 700;
    color: var(--text-muted);
    letter-spacing: 0.05em;
    flex-shrink: 0;
}

.status-rt-text {
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Now playing (RT+) */
.status-nowplaying {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    flex-shrink: 0;
    white-space: nowrap;
}

.status-np-icon {
    color: var(--accent-green);
    font-size: 0.875rem;
}

#status-np-text {
    color: var(--text-primary);
    font-size: 0.8125rem;
}

/* Responsive */
@media (max-width: 640px) {
    header {
        padding: 0 0.75rem;
        gap: 0.5rem;
    }

    .header-left h1 {
        font-size: 0.95rem;
    }

    nav {
        margin-left: 0.5rem;
    }

    main {
        padding: 0.75rem;
    }

    .console-log {
        height: calc(100vh - 18rem);
        font-size: 0.75rem;
    }

    .console-topic {
        min-width: 6rem;
    }

    .status-row {
        padding: 0 0.75rem;
        font-size: 0.75rem;
    }

    .status-row-main {
        flex-wrap: wrap;
        height: auto;
        padding-top: 0.375rem;
        padding-bottom: 0.375rem;
        gap: 0.375rem;
    }

    .status-row-info {
        height: auto;
        padding-top: 0.25rem;
        padding-bottom: 0.375rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.125rem;
    }

    .status-group-right {
        margin-left: 0;
    }
}
